/*
 *  googlesheets-htmlimporter - v0.1.0
 *  A jQuery plugin to assist with loading Google Sheets json information as HTML on a web page.
 *  https://github.com/seanmcardwell/GoogleSheets-HTMLImporter#readme
 *
 *  Made by Sean Cardwell
 *  Under MIT License
 */
!function(a){"use strict";a.fn.gsImport=function(b){var c={class:{cell:"gsCell",row:"gsRow",header:"gsHeader",headerRow:"gsHeaderRow",body:"gsBody",table:"gsTable table table-responsive table-striped"},searchBar:0,picturize:!0,image1:'<i class="fa fa-check check-icon"></i>',image2:'<i class="fa fa-times x-icon"></i>',customImages:"",ignore:{toggle:0,column:"",trigger:""}},d=a.extend(!0,{},c,b),e=/^[A-Za-z][ -_A-Za-z0-9]+$/;return a.each(d,function(a,b){"class"===a&&("string"==typeof b.table&&null!==b.table.match(e)||(d.class.table=c.class.table,console.warn("GSImport:\t One of your GSImport options might be invalid.\n\t\t\t Resetting to default value for Class.table.")),"string"==typeof b.cell&&null!==b.cell.match(e)||(d.class.cell=c.class.cell,console.warn("GSImport:\t One of your GSImport options might be invalid.\n\t\t\t Resetting to default value for Class.cell.")),"string"==typeof b.row&&null!==b.row.match(e)||(d.class.row=c.class.row,console.warn("GSImport:\t One of your GSImport options might be invalid.\n\t\t\t Resetting to default value for Class.row.")),"string"==typeof b.header&&null!==b.header.match(e)||(d.class.header=c.class.header,console.warn("GSImport:\t One of your GSImport options might be invalid.\n\t\t\t Resetting to default value for Class.header.")),"string"==typeof b.headerRow&&null!==b.headerRow.match(e)||(d.class.headerRow=c.class.headerRow,console.warn("GSImport:\t One of your GSImport options might be invalid.\n\t\t\t Resetting to default value for Class.headerRow.")),"string"==typeof b.body&&null!==b.body.match(e)||(d.class.body=c.key.body,console.warn("GSImport:\t One of your GSImport options might be invalid.\n\t\t\t Resetting to default value for Class.body."))),"searchBar"===a&&1!==b&&0!==b&&(d.searchBar=c.searchBar,console.warn("GSImport:\t One of your GSImport options might be invalid.\n\t\t\t Resetting to default value for "+a+".")),"picturize"===a&&"boolean"!=typeof b&&(d.picturize=c.picturize,console.warn("GSImport:\t One of your GSImport options might be invalid.\n\t\t\t Resetting to default value for "+a+"."))}),this.append(function(){function b(a){if(Boolean(d.picturize)===!1)return picturizeLog<1&&(console.log("GSImport: Picturize disabled for div: "+c.attr("id")),picturizeLog+=1),a;switch(a){case"":return"-";case"!":return d.image1;case"X":return d.image2;default:return a}}var c=a(this),e=c.data("headers"),f=c.data("key"),g=c.data("index");if("undefined"==typeof f)return void console.error("GSImport: No data-key provided for div: "+c.attr("id"));if("undefined"==typeof e)return void console.error("GSImport: No data-headers provided for div: "+c.attr("id"));"undefined"==typeof g&&(console.warn("GSImport: No data-index provided for div: "+c.attr("id")+"\nDefaulting to od6"),g="od6");var h="https://spreadsheets.google.com/feeds/list/"+f+"/"+g+"/public/values?alt=json";d.ignore.trigger.toLowerCase();var i=e.split(", "),j="";return a.getJSON(h,function(e){var f=e.feed.entry;j+='<table class="'+d.class.table+'"><thead><tr class="'+d.class.headerRow+'">',a.each(i,function(){j+='<th class="'+d.class.header+'">'+this.toString()+"</th>"});var g=0;a.each(i,function(){i[g]=this.replace(/^\d+ */g,"").replace(/\s/g,""),g++}),j+='</tr></thead><tbody class="'+d.class.body+'">',a(f).each(function(){var c=this;j+="<tr>",a(i).each(function(){j+='<td class="'+d.class.cell+'">'+b(c["gsx$"+this.toString().toLowerCase()].$t)+"</td>"}),j+="</tr>"}),j+="</tbody></table>",a(c).append(j),console.log("GS Import: "+c.attr("id")+" key("+c.data("key")+") loaded")}),j})}}(jQuery);